# Stage 2: bw-only after stage1 accel.
# Train:
#   python scripts/train.py --config configs/phase1_actions_curriculum_stage2_bw.yaml --updates 500 --log_dir runs/phase1_actions --run_id stage2_bw --init_actor runs/phase1_actions/stage1_accel/actor.pt --init_critic runs/phase1_actions/stage1_accel/critic.pt
# Notes:
#   - exec_accel_source=teacher uses exec_teacher_actor_path if set, otherwise falls back to --init_actor.
seed: 42
map_size: 3000.0
tau0: 1.0
T_steps: 400

num_uav: 3
num_gu: 20
num_sat: 72
walker_num_planes: 6
sat_state_max: 9

users_obs_max: 20
sats_obs_max: 6
visible_sats_max: 6
visible_sats_min: null
nbrs_obs_max: 4

uav_height: 100.0
sat_height: 500000.0
theta_min_deg: 5.0
v_max: 30.0
a_max: 5.0
d_safe: 20.0
boundary_mode: reflect

candidate_mode: "nearest"
candidate_k: 20

uav_spawn_curriculum_enabled: true
uav_spawn_radius_start: 100.0
uav_spawn_radius_end: 1000.0
uav_spawn_curriculum_steps: 200
uav_spawn_full_random_final: true

task_arrival_rate: 1.8e5
task_arrival_poisson: true
traffic_level: 1
traffic_level_nav_ratio: 0.08
traffic_level_easy_ratio: 0.5
traffic_level_hard_ratio: 1.0
arrival_ramp_steps: 0
arrival_ramp_start: 0.0
arrival_ramp_use_global: false
queue_init_frac: 0.1
queue_init_uav_frac: 0.02
queue_init_sat_frac: 0.01

gu_tx_power: 0.18
uav_tx_gain: 300.0
sat_rx_gain: 300.0
b_acc: 1.0e7
b_sat_total: 2.0e7
sat_cpu_freq: 1.0e10
noise_density: 4.0e-21
pathloss_mode: prob_los
pl_threshold_db: 140.0

doppler_observed: true
doppler_enabled: false
energy_enabled: false
fading_enabled: false
interference_enabled: false

enable_bw_action: true
fixed_satellite_strategy: true
sat_select_mode: sample
N_RF: 2

train_accel: false
train_bw: true
train_sat: false
train_shared_backbone: true
exec_accel_source: teacher
exec_bw_source: policy
exec_sat_source: zero
exec_teacher_actor_path: null
exec_teacher_deterministic: true

avoidance_enabled: true
avoidance_eta: 100.0
avoidance_alert_factor: 1.5
eta_crash: 5.0

omega_q: 1.1
omega_q_gu: 1.0
omega_q_uav: 0.0
omega_q_sat: 0.0
eta_drop: 1.3
eta_service: 1.25
eta_assoc: 0.25
eta_q_delta: 0.8
eta_throughput_access: 0.4
eta_throughput_backhaul: 0.0
eta_accel: 0.02
eta_centroid: 0.3
centroid_dist_scale: 400.0
eta_bw_align: 0.7
eta_sat_score: 0.0
eta_dist_delta: 0.0
queue_log_k: 6.0
queue_delta_use_active: true

input_norm_enabled: true
reward_norm_enabled: true
reward_norm_clip: 5.0
reward_tanh_enabled: false
lr_decay_enabled: true
lr_final_factor: 0.1
critic_lr: 1.0e-4
actor_hidden: 256
critic_hidden: 256

imitation_enabled: true
imitation_coef: 0.2
imitation_accel: false
imitation_bw: true
imitation_sat: false

buffer_size: 400
num_mini_batch: 4
ppo_epochs: 1
entropy_coef: 0.005

early_stop_enabled: false
